{"ast":null,"code":"var _jsxFileName = \"/home/ana/Documentos/proyectos-ana.github/E-commerce/new-ecomerce/src/context/CartContext.js\",\n  _s = $RefreshSig$();\nimport { createContext, useEffect } from \"react\";\nimport { useLocalStorage } from \"../components/useLocalStorage/useLocalStorage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CartContext = /*#__PURE__*/createContext([]);\nexport const AppProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [cart, setCart] = useLocalStorage(\"cart\", []);\n  useEffect(() => {\n    if (localStorage.getItem(\"cart\") !== null) {\n      setCart(JSON.parse(localStorage.getItem(\"cart\")));\n    }\n  }, []);\n  const CartLength = () => {\n    return cart.reduce((prev, next) => {\n      return prev + next.quantity;\n    }, 0);\n  };\n  const CartPrice = () => {\n    return cart.reduce((prev, next) => {\n      return prev + next.quantity * next.price;\n    }, 0);\n  };\n  const addItem = (newItem, newQuantity) => {\n    if (isInCart(newItem.id) === -1) {\n      setCart([...cart, {\n        item: newItem,\n        quantity: newQuantity\n      }]);\n      localStorage.setItem(\"cart\", JSON.stringify([...cart, {\n        item: newItem,\n        quantity: newQuantity\n      }]));\n      console.log(JSON.stringify([...cart, {\n        item: newItem,\n        quantity: newQuantity\n      }]));\n    } else {\n      const {\n        quantity\n      } = cart.find(e => e.item.id === newItem.id);\n      const newCart = cart.filter(e => e.item.id !== newItem.id);\n      setCart([...newCart, {\n        item: newItem,\n        quantity: quantity + newQuantity\n      }]);\n      localStorage.setItem(\"cart\", JSON.stringify([...newCart, {\n        item: newItem,\n        quantity: quantity + newQuantity\n      }]));\n    }\n  };\n  const removeItem = itemId => {\n    const newCart = cart.filter(e => e.item.id !== itemId);\n    setCart(newCart);\n    localStorage.setItem(\"cart\", JSON.stringify(newCart));\n  };\n  const clear = () => {\n    setCart([]);\n    localStorage.setItem(\"cart\", JSON.stringify([]));\n  };\n  const isInCart = id => {\n    if (cart) {\n      console.log(\"Esta en cart?\", cart);\n      return cart.findIndex(e => e.item.id === id);\n    } else {\n      return null;\n    }\n  };\n  const totalPrice = () => {\n    return cart.reduce((acc, product) => {\n      var _product$item;\n      return acc += (product === null || product === void 0 ? void 0 : product.quantity) * ((_product$item = product.item) === null || _product$item === void 0 ? void 0 : _product$item.price);\n    }, 0);\n  };\n  const handleQuantity = (product, quantity) => {\n    product.quantity = quantity;\n    setCart([...cart]);\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cart,\n      addItem,\n      handleQuantity,\n      removeItem,\n      clear,\n      isInCart,\n      CartLength,\n      totalPrice,\n      CartPrice\n    },\n    children: [children, \"e\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n};\n_s(AppProvider, \"b9TSliR31CrIzH/aS2/igFJS2zU=\", false, function () {\n  return [useLocalStorage];\n});\n_c = AppProvider;\nexport default CartContext;\nvar _c;\n$RefreshReg$(_c, \"AppProvider\");","map":{"version":3,"names":["createContext","useEffect","useLocalStorage","jsxDEV","_jsxDEV","CartContext","AppProvider","_ref","_s","children","cart","setCart","localStorage","getItem","JSON","parse","CartLength","reduce","prev","next","quantity","CartPrice","price","addItem","newItem","newQuantity","isInCart","id","item","setItem","stringify","console","log","find","e","newCart","filter","removeItem","itemId","clear","findIndex","totalPrice","acc","product","_product$item","handleQuantity","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/ana/Documentos/proyectos-ana.github/E-commerce/new-ecomerce/src/context/CartContext.js"],"sourcesContent":["import { createContext, useEffect } from \"react\";\nimport { useLocalStorage } from \"../components/useLocalStorage/useLocalStorage\";\nexport const CartContext = createContext([]);\n\nexport const AppProvider = ({ children }) => {\n  const [cart, setCart] = useLocalStorage(\"cart\", []);\n  \n  useEffect(() => {\n    if (localStorage.getItem(\"cart\") !== null) {\n      setCart(JSON.parse(localStorage.getItem(\"cart\")));\n    }\n  }, []);\n\n  const CartLength = () => {\n    return cart.reduce((prev, next) => {\n      return prev + next.quantity;\n    }, 0);\n  };\n\n  \n  const CartPrice = () => {\n    return cart.reduce((prev, next) => {\n      return prev + next.quantity * next.price;\n    }, 0);\n  };\n\n  const addItem = (newItem, newQuantity) => {\n    if (isInCart(newItem.id) === -1) {\n      setCart([...cart, { item: newItem, quantity: newQuantity }]);\n      localStorage.setItem(\n        \"cart\",\n        JSON.stringify([...cart, { item: newItem, quantity: newQuantity }])\n      );\n\n      console.log(\n        JSON.stringify([...cart, { item: newItem, quantity: newQuantity }])\n      );\n    } else {\n      const { quantity } = cart.find((e) => e.item.id === newItem.id);\n      const newCart = cart.filter((e) => e.item.id !== newItem.id);\n      setCart([\n        ...newCart,\n        { item: newItem, quantity: quantity + newQuantity },\n      ]);\n      localStorage.setItem(\n        \"cart\",\n        JSON.stringify([\n          ...newCart,\n          { item: newItem, quantity: quantity + newQuantity },\n        ])\n      );\n    }\n  };\n  const removeItem = (itemId) => {\n    const newCart = cart.filter((e) => e.item.id !== itemId);\n    setCart(newCart);\n    localStorage.setItem(\"cart\", JSON.stringify(newCart));\n  };\n  const clear = () => {\n    setCart([]);\n    localStorage.setItem(\"cart\", JSON.stringify([]));\n  };\n  const isInCart = (id) => {\n    if (cart) {\n      console.log(\"Esta en cart?\", cart);\n      return cart.findIndex((e) => e.item.id === id);\n    } else {\n      return null;\n    }\n  };\n  const totalPrice = () => {\n    return cart.reduce(\n      (acc, product) => (acc += product?.quantity * product.item?.price),\n      0\n    );\n  };\n\n  const handleQuantity = (product, quantity) => {\n    product.quantity = quantity;\n    setCart([...cart]);\n  };\n\n  return (\n    <CartContext.Provider\n      value={{\n        cart,\n        addItem,\n        handleQuantity,\n        removeItem,\n        clear,\n        isInCart,\n        CartLength,\n        totalPrice,\n        CartPrice,\n      }}\n    >\n      {children}e\n    </CartContext.Provider>\n  );\n};\n\nexport default CartContext;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}